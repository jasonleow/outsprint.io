!function(t,$){"use strict";var e=t.document,i=function(){function i(){o(),n()}function o(){x.$window=$(t),x.$document=$(e),x.$nav=$("#site-navigation"),x.$isWidgetized=$("body.page-template-template-widgetized-php").length>0,x.$isContactTemplate=$("body.page-template-template-contact-php").length>0,x.$isPortfolioTemplate=$("body.page-template-template-portfolio-php").length>0,x.isiPod=y(),x.isSafari=b(),x.windowHeight=!0===x.isiPod&&!0===x.isSafari?t.screen.availHeight:x.$window.height()}function n(){t.addEventListener("scroll",function(t){_.didScroll||(_.didScroll=!0,setTimeout(r,250))},!1),x.$document.on("ready",function(){a(),d()}),x.$window.on("load",m),x.$isWidgetized&&(x.$document.on("ready",function(){l(),h(),v()}),x.$window.on("scroll",function(){c($(".stag_widget_intro").find(".static-content-cover")),c($(".stag_widget_static_content").find(".static-content-cover")),c($(".stag_widget_blog").find(".static-content-cover"))})),(x.$isWidgetized||x.$isContactTemplate)&&$(".contact-form").on("submit",function(t){t.preventDefault();var e=$(this),i=e.find("#contact_submit"),o=i.val();i.val(stag.sendText),$.ajax({type:"POST",url:stag.ajaxurl,data:e.serialize()+"&action=contact_form",success:function(t){t=$.parseJSON(t),i.val(o);var n=$('<div class="form-status '+t.type+'"></div>');n.text(t.message),n.insertBefore(e.find("#contact_submit")).delay(4e3).slideUp(200),e.find("input[type=text],input[type=email],textarea").val("")}})}),$(".stag_widget_portfolio .portfolio-grid").on("click","a",p),$(".stag_widget_blog .post").on("click","a",p),x.$window.on("load",function(){u()}),$("#site-navigation").on("click","a",function(t){var e=/^#/g,i=$(this).attr("href");if(e.test(i)!==!1){t.preventDefault();var o=i,n;n=$(o).offset().top,x.$window.width()>900&&($("body").hasClass("admin-bar")&&(n-=$("#wpadminbar").height()),n-=120),$("html, body").animate({scrollTop:n})}}),(x.$isPortfolioTemplate||x.$isWidgetized)&&w()}function a(){x.$nav.length<1||responsiveNav("#site-navigation",{label:'<i class="fa fa-navicon"></i>',transition:200,insert:"before",openPos:"relative"})}function s(){return t.pageYOffset||e.scrollTop}function r(){var t=s();t>_.changeOn?($(".site-header").addClass("header--pinned"),$(".site-header").removeClass("header--unpinned")):($(".site-header").removeClass("header--pinned"),$(".site-header").addClass("header--unpinned")),_.didScroll=!1}function d(){-1===e.cookie.indexOf("retina")&&"devicePixelRatio"in t&&2===t.devicePixelRatio&&(e.cookie="retina="+t.devicePixelRatio+";")}function l(){$(".page-template-template-widgetized-php").find(".stag_widget_static_content, .stag_widget_intro, .stag_widget_blog").each(function(){var t=$(this),e=t.find(".hentry").data("bg-color"),i=t.find(".hentry").data("bg-image"),o=parseInt(t.find(".hentry").data("bg-opacity"),10),n=t.find(".hentry").data("text-color"),a=t.find(".hentry").data("link-color");t.prepend('<div class="static-content-cover" />'),t.find(".static-content-cover").css({"background-image":"url("+i+")",opacity:o/100,"-ms-filter":'"alpha(opacity='+o+')"'}),t.css({"background-color":e,color:n}),t.find("a").css("color",a),t.find("h1, h2, h3, h4, h5, h6").css("color",n)})}function c(t,e){x.$window.width()<769||$(t).each(function(){var t=$(this),e=$(this).parent().attr("id");if(e=$("#"+e),!(!$(e).length>0)){var i=$(e).offset().top,o=$(e).outerHeight(),n=$(e).offset().top-x.$window.scrollTop(),a=a||.4;if(!(i+o<=x.$window.scrollTop()||i>=x.$window.scrollTop()+x.windowHeight)){var s=Math.round((i-x.$window.scrollTop())*a);$(t).css("backgroundPosition","50% "+s+"px")}}})}function f(i,o,n){history.pushState||(e.location.href=o);var a=$("#post-modal").find(".post-modal-inner");i=$(i).find(".site-main"),$("body").addClass("overflow-hidden"),history.pushState&&history.pushState(null,null,o);var s=$('<div id="post-modal" class="post-modal"></div>'),r=$('<div class="post-modal-inner"></div>'),d=$('<div class="inside close-button-wrap"><button title="Close (Esc)" type="button" class="close"><i class="fa fa-times"></i></button></div>');$("#post-modal").length<1?(r.append(i.html()),s.append(d),s.append(r),$("body").append(s),$(t).trigger("resize")):(a.html(i.html()),$(t).trigger("resize")),u(),setInterval(function(){$(t).trigger("resize")},15),d.on("click",g)}function g(){history.pushState&&history.pushState(null,null,stag.permalink),$("body").removeClass("overflow-hidden")}function p(e){var i=x.$window[0].innerWidth;if(!(767>i)){e.preventDefault(),NProgress.start(),NProgress.set(.1);var o=$(this).attr("href"),n=o.split("/"),a=n.pop(),s=$(this).data("type");if(""==a&&(a=n.pop()),T[a]){var r=T[a];f(r,o),NProgress.done()}else $("body").addClass("loading"),NProgress.set(.3),$.ajax({url:o}).done(function(e){NProgress.set(.7);var i=T[a]=e;f(e,o,s),$("body").removeClass("loading"),u(),$(t).trigger("resize"),NProgress.done()})}}function u(){$.fn.flexslider&&($(".flexslider").flexslider({smoothHeight:!0,directionNav:!1,start:function(){$(t).trigger("resize"),setTimeout(function(){$(t).trigger("resize")},10),setTimeout(function(){$(t).trigger("resize")},50),setTimeout(function(){$(t).trigger("resize")},100)}}),$(t).trigger("resize"))}function h(){$.fn.bxSlider&&$(".testimonials-slideshow").bxSlider({infiniteLoop:!0,adaptiveHeight:!0,pager:!1,mode:"fade",nextText:stag.nextText,prevText:stag.prevText})}function v(){$.fn.bxSlider&&$(".blog-slideshow").bxSlider({slideWidth:370,minSlides:1,maxSlides:3,slideMargin:30,infiniteLoop:!1,adaptiveHeight:!0,pager:!1,nextText:stag.nextText,prevText:stag.prevText})}function m(){var t;x.$window.on("keyup",function(e){switch(t=e.which||e.keyCode){case 27:g()}})}function w(){if("off"!==stag.portfolioFilter){var t=$(".portfolio-grid");t.imagesLoaded(function(){t.isotope({itemSelector:".portfolio",layoutMode:"fitRows"})}),x.$window.resize(),$("#filters").on("click","a",function(e){e.preventDefault(),$("#filters").find("a").removeClass("active"),$(this).addClass("active");var i=$(this).attr("data-filter-value");t.isotope({filter:i})})}}function y(){return/(iPhone|iPod)/g.test(navigator.userAgent)}function b(){return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")}var x={},T=[],_={didScroll:!1,changeOn:300},S=$(".display-intro .stag_widget_intro");S.length&&(_.changeOn=S.height()/2),i()};t.Stag=new i}(window,jQuery);